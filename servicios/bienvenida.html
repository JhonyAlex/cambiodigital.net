<!DOCTYPE html>
<html lang="es" class="scroll-smooth overflow-x-hidden">
<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Bienvenido | Cambio Digital</title>
    <meta name="description" content="Bienvenido a tu ecosistema digital. Gestiona tus solicitudes, contacta soporte y revisa tus beneficios.">
    <meta name="robots" content="noindex, nofollow"> <!-- Private page -->
    <link rel="icon" type="image/png" href="/assets/favicon.png">
    <link rel="icon" type="image/png" media="(prefers-color-scheme: light)" href="/assets/images/LogoCDFondoClaro.png">
    <link rel="icon" type="image/png" media="(prefers-color-scheme: dark)" href="/assets/images/LogoCDFondoOscuro.png">
    <link rel="manifest" href="/manifest.json">
    <meta name="theme-color" content="#1c2143">

    <link rel="stylesheet" href="/assets/css/tailwind.generated.css">
    <link rel="stylesheet" href="/assets/css/theme.css">


    <!-- Google Fonts -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;700;900&family=Space+Mono:wght@400;700&display=swap" rel="stylesheet">
    
    <!-- Lucide Icons -->
    <script src="https://unpkg.com/lucide@latest"></script>
    
    <!-- Popup NavideÃ±o y Banner de Cookies -->
    <!-- <link rel="stylesheet" href="/assets/css/popup-navidad.css">
    <link rel="stylesheet" href="/assets/css/cookies-banner.css"> -->
    
    
</head>

<body class="font-sans antialiased overflow-x-hidden selection:bg-cd-magenta selection:text-white" style="background: var(--color-bg); color: var(--color-text);">

    <!-- Custom Cursor -->
    <div id="cursor-outline"></div>
    <div id="cursor-dot"></div>

    <div class="fixed inset-0 z-0 bg-grid"></div>

    <!-- Header Container -->
    <div id="header-container"></div>

    <main class="relative z-10 pt-32 pb-24 px-4 md:px-8">
        
        <!-- Welcome Hero -->
        <section class="max-w-7xl mx-auto mb-16 text-center">
            <div class="inline-block mb-4 px-4 py-1 border-2 border-cd-cream bg-transparent text-cd-cream font-mono text-xs md:text-sm font-bold uppercase">
                Primer Contacto
            </div>
            <h1 class="font-black text-5xl md:text-7xl uppercase mb-6 leading-none">
                Bienvenido al <span class="text-cd-magenta">Equipo</span>
            </h1>
            <p class="font-mono text-lg md:text-xl max-w-2xl mx-auto text-cd-lavender">
                Tu ecosistema digital estÃ¡ listo. AquÃ­ puedes gestionar tus solicitudes, contactar soporte y ver el estado de tu servicio.
            </p>
        </section>

        <div class="max-w-7xl mx-auto grid grid-cols-1 lg:grid-cols-2 gap-8 lg:gap-12">
            
            <!-- Left Column: Info & Links -->
            <div class="space-y-8">
                
                <!-- Contact Section -->
                <div class="bg-white text-black p-8 border-hard shadow-hard relative overflow-hidden">
                    <h2 class="font-black text-3xl uppercase mb-6 flex items-center gap-3">
                        <i data-lucide="message-circle" class="w-8 h-8 text-cd-magenta"></i>
                        Canales Directos
                    </h2>
                    
                    <!-- WhatsApp -->
                    <a href="https://wa.me/573122908416" target="_blank" class="block w-full bg-[#25D366] text-white font-bold text-lg py-4 px-6 border-2 border-black shadow-[4px_4px_0_black] hover:translate-x-[2px] hover:translate-y-[2px] hover:shadow-[2px_2px_0_black] transition-all mb-6 flex items-center justify-between group">
                        <span class="flex items-center gap-3"><i data-lucide="phone" class="fill-current"></i> WhatsApp Soporte</span>
                        <span class="font-mono text-sm opacity-90 group-hover:underline">+57 312 290 8416</span>
                    </a>

                    <!-- Google Chat Info -->
                    <div class="bg-cd-lavender border-2 border-black p-6 mb-6">
                        <div class="flex items-start gap-4">
                            <div class="bg-white p-2 border-2 border-black shadow-[2px_2px_0_black]">
                                <i data-lucide="users" class="w-6 h-6 text-cd-purple-dark"></i>
                            </div>
                            <div>
                                <h3 class="font-black uppercase text-lg mb-2">Google Chat Group</h3>
                                <p class="font-mono text-sm leading-relaxed mb-2">
                                    Te hemos aÃ±adido a un grupo privado de Google Chat.
                                </p>
                                <ul class="list-disc list-inside font-mono text-xs space-y-1 font-bold">
                                    <li>Reportes de estado</li>
                                    <li>ComunicaciÃ³n corporativa</li>
                                    <li>CoordinaciÃ³n de equipos</li>
                                </ul>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Policies & Reminders -->
                <div class="bg-cd-purple-dark text-white p-8 border-hard shadow-[6px_6px_0_#5a82ff]">
                    <h2 class="font-black text-3xl uppercase mb-6 flex items-center gap-3 text-cd-cream">
                        <i data-lucide="info" class="w-8 h-8 text-cd-magenta"></i>
                        Info Clave
                    </h2>

                    <div class="space-y-4">
                        <!-- Weekly Report -->
                        <div class="flex items-start gap-4 p-4 border-2 border-white/20 bg-white/5">
                            <i data-lucide="calendar" class="w-6 h-6 text-cd-magenta mt-1 shrink-0"></i>
                            <div>
                                <h3 class="font-bold uppercase text-cd-cream mb-1">Informes Semanales</h3>
                                <p class="font-mono text-sm text-gray-300">
                                    RecibirÃ¡s un reporte detallado de actividad y rendimiento cada <strong>Viernes</strong>.
                                </p>
                            </div>
                        </div>

                        <!-- Benefits -->
                        <div class="flex items-start gap-4 p-4 border-2 border-white/20 bg-white/5">
                            <i data-lucide="gift" class="w-6 h-6 text-cd-magenta mt-1 shrink-0"></i>
                            <div>
                                <h3 class="font-bold uppercase text-cd-cream mb-1">Tus Beneficios</h3>
                                <ul class="font-mono text-xs text-gray-300 space-y-1 ml-1">
                                    <li>âœ“ Soporte Prioritario 24/7</li>
                                    <li>âœ“ AuditorÃ­a Mensual de Procesos</li>
                                    <li>âœ“ Acceso a Herramientas Premium</li>
                                    <li>âœ“ ConsultorÃ­a EstratÃ©gica Trimestral</li>
                                </ul>
                            </div>
                        </div>

                        <!-- Policies -->
                        <div class="flex items-start gap-4 p-4 border-2 border-white/20 bg-white/5">
                            <i data-lucide="shield" class="w-6 h-6 text-cd-magenta mt-1 shrink-0"></i>
                            <div>
                                <h3 class="font-bold uppercase text-cd-cream mb-1">PolÃ­ticas & TÃ©rminos</h3>
                                <p class="font-mono text-xs text-gray-300">
                                    Al usar la plataforma aceptas nuestros tÃ©rminos de servicio y polÃ­tica de privacidad de datos.
                                </p>
                                <a href="/servicios/it-partner" class="inline-block mt-2 text-xs font-bold underline decoration-cd-magenta underline-offset-4 hover:text-cd-magenta transition-colors">Ver DocumentaciÃ³n Completa</a>
                            </div>
                        </div>
                    </div>
                </div>

            </div>

            <!-- Right Column: Service Form -->
            <div class="relative">
                <div class="absolute -top-6 -right-6 bg-cd-magenta text-white font-mono text-xs px-4 py-2 border-2 border-black shadow-[4px_4px_0_black] z-20 hidden md:block animate-bounce">
                    Â¡ESTAMOS LISTOS!
                </div>

                <div class="card-modern p-6 md:p-8">
                    <h2 class="font-black text-3xl md:text-4xl mb-2 text-left uppercase">Tu Primer Servicio</h2>
                    <p class="font-mono text-left mb-6 text-gray-600 text-sm">Configura tu solicitud inicial para comenzar.</p>
                    
                    <form id="serviceRequestForm" class="space-y-5 text-left">
                        <div>
                            <label class="block font-bold text-sm uppercase mb-2">Nombre Completo <span class="text-cd-magenta">*</span></label>
                            <input type="text" id="req-name" required class="w-full p-3 bg-white border-2 border-black focus:outline-none focus:bg-cd-lavender focus:shadow-[4px_4px_0_black] transition-all font-mono text-base" placeholder="Tu nombre completo">
                        </div>

                        <!-- Selector de Contacto -->
                        <div>
                            <label class="block font-bold text-sm uppercase mb-2">Datos de Contacto <span class="text-cd-magenta">*</span></label>
                            
                            <div class="mb-4">
                                <label class="block font-bold text-xs uppercase mb-1 text-gray-600">Correo ElectrÃ³nico <span class="text-cd-magenta">*</span></label>
                                <input type="email" id="req-email" required class="w-full p-3 bg-white border-2 border-black focus:outline-none focus:bg-cd-lavender focus:shadow-[4px_4px_0_black] transition-all font-mono text-base" placeholder="usuario@empresa.com">
                                <p class="text-xs font-mono text-cd-magenta mt-1">* Necesario para acceso al grupo de chat y Drive.</p>
                            </div>

                            <div class="mb-2">
                                <label class="block font-bold text-xs uppercase mb-1 text-gray-600">TelÃ©fono / WhatsApp <span class="text-cd-magenta">*</span></label>
                                <div class="flex gap-2">
                                    <select id="req-country-code" class="w-1/3 p-3 bg-white border-2 border-black focus:outline-none focus:bg-cd-lavender font-mono text-base">
                                        <optgroup label="NorteamÃ©rica">
                                            <option value="+1">ðŸ‡ºðŸ‡¸ USA (+1)</option>
                                            <option value="+1">ðŸ‡¨ðŸ‡¦ CanadÃ¡ (+1)</option>
                                            <option value="+52">ðŸ‡²ðŸ‡½ MÃ©xico (+52)</option>
                                        </optgroup>
                                        <optgroup label="SudamÃ©rica">
                                            <option value="+57" selected>ðŸ‡¨ðŸ‡´ Colombia (+57)</option>
                                            <option value="+54">ðŸ‡¦ðŸ‡· Argentina (+54)</option>
                                            <option value="+56">ðŸ‡¨ðŸ‡± Chile (+56)</option>
                                            <option value="+51">ï¿½ï¿½ PerÃº (+51)</option>
                                            <option value="+593">ðŸ‡ªðŸ‡¨ Ecuador (+593)</option>
                                            <option value="+58">ðŸ‡»ðŸ‡ª Venezuela (+58)</option>
                                            <option value="+591">ðŸ‡§ðŸ‡´ Bolivia (+591)</option>
                                            <option value="+595">ðŸ‡µðŸ‡¾ Paraguay (+595)</option>
                                            <option value="+598">ðŸ‡ºðŸ‡¾ Uruguay (+598)</option>
                                            <option value="+55">ðŸ‡§ðŸ‡· Brasil (+55)</option>
                                        </optgroup>
                                        <optgroup label="CentroamÃ©rica y Caribe">
                                            <option value="+502">ï¿½ï¿½ Guatemala (+502)</option>
                                            <option value="+1">ðŸ‡©ðŸ‡´ Rep. Dom. (+1)</option>
                                            <option value="+504">ðŸ‡­ðŸ‡³ Honduras (+504)</option>
                                            <option value="+503">ðŸ‡¸ðŸ‡» El Salvador (+503)</option>
                                            <option value="+505">ðŸ‡³ðŸ‡® Nicaragua (+505)</option>
                                            <option value="+506">ðŸ‡¨ðŸ‡· Costa Rica (+506)</option>
                                            <option value="+507">ðŸ‡µðŸ‡¦ PanamÃ¡ (+507)</option>
                                        </optgroup>
                                        <optgroup label="Europa">
                                            <option value="+34">ðŸ‡ªðŸ‡¸ EspaÃ±a (+34)</option>
                                            <option value="+44">ðŸ‡¬ðŸ‡§ Reino Unido (+44)</option>
                                            <option value="+49">ðŸ‡©ðŸ‡ª Alemania (+49)</option>
                                            <option value="+33">ðŸ‡«ðŸ‡· Francia (+33)</option>
                                            <option value="+39">ðŸ‡®ðŸ‡¹ Italia (+39)</option>
                                            <option value="+351">ðŸ‡µðŸ‡¹ Portugal (+351)</option>
                                            <option value="+31">ðŸ‡³ðŸ‡± PaÃ­ses Bajos (+31)</option>
                                            <option value="+32">ðŸ‡§ðŸ‡ª BÃ©lgica (+32)</option>
                                            <option value="+41">ðŸ‡¨ðŸ‡­ Suiza (+41)</option>
                                        </optgroup>
                                        <option value="">Otro</option>
                                    </select>
                                    <input type="tel" id="req-phone" required pattern="[0-9\s\-\.]+" class="w-2/3 p-3 bg-white border-2 border-black focus:outline-none focus:bg-cd-lavender focus:shadow-[4px_4px_0_black] transition-all font-mono text-base" placeholder="300 123 4567">
                                </div>
                            </div>
                        </div>

                        <div>
                            <label class="block font-bold text-sm uppercase mb-2">TÃ­tulo del requerimiento <span class="text-cd-magenta">*</span></label>
                            <input type="text" id="req-title" required class="w-full p-3 bg-white border-2 border-black focus:outline-none focus:bg-cd-lavender focus:shadow-[4px_4px_0_black] transition-all font-mono text-base" placeholder="Ej: ConfiguraciÃ³n Inicial de CRM">
                        </div>

                        <div>
                            <label class="block font-bold text-sm uppercase mb-2">DescripciÃ³n Ampliada y Requisitos <span class="text-cd-magenta">*</span></label>
                            <textarea id="req-desc" required rows="6" class="w-full p-3 bg-white border-2 border-black focus:outline-none focus:bg-cd-lavender focus:shadow-[4px_4px_0_black] transition-all font-mono text-base" placeholder="Por favor detalla:
- Objetivo principal del servicio
- Accesos o credenciales necesarias (si aplica)
- Requisitos especÃ­ficos o restricciones
- Cualquier otra informaciÃ³n relevante"></textarea>
                        </div>

                        <div class="grid grid-cols-1 sm:grid-cols-2 gap-4">
                            <div>
                                <label class="block font-bold text-sm uppercase mb-2">Fecha de Inicio Deseada <span class="text-cd-magenta">*</span></label>
                                <input type="date" id="req-date" required class="w-full p-3 bg-white border-2 border-black focus:outline-none focus:bg-cd-lavender focus:shadow-[4px_4px_0_black] transition-all font-mono text-base">
                            </div>
                            
                            <div>
                                <label class="block font-bold text-sm uppercase mb-2">Adjunto</label>
                                <input type="file" id="req-file" accept="image/*,application/pdf" class="w-full p-3 bg-white border-2 border-black focus:outline-none focus:bg-cd-lavender focus:shadow-[4px_4px_0_black] transition-all font-mono text-sm">
                            </div>
                        </div>

                        <button type="submit" id="btn-submit-task" class="w-full bg-black text-white font-black text-xl py-4 border-2 border-black hover:bg-cd-magenta transition-colors btn-press shadow-[6px_6px_0_var(--shadow-color)] uppercase flex justify-center items-center gap-2 min-h-[48px]">
                            <span>Iniciar Servicio</span> <i data-lucide="rocket"></i>
                        </button>
                    </form>
                </div>
            </div>

        </div>
    </main>

    <!-- Footer Container -->
    <div id="footer-container"></div>

    <!-- Success Popup -->
    <div id="success-popup" class="fixed inset-0 z-[100] hidden flex items-center justify-center bg-black/80 backdrop-blur-sm px-4">
        <div class="bg-cd-cream border-4 border-black p-8 max-w-md w-full shadow-[8px_8px_0_#5a82ff] text-center relative animate-fade-in">
            <button onclick="closePopup()" class="absolute top-4 right-4 p-2 hover:bg-black hover:text-white transition-colors min-w-[48px] min-h-[48px] flex items-center justify-center">
                <i data-lucide="x" class="w-6 h-6 text-black hover:text-white"></i>
            </button>
            <div class="w-20 h-20 bg-green-400 rounded-full border-4 border-black flex items-center justify-center mx-auto mb-6 shadow-[4px_4px_0_black]">
                <i data-lucide="check" class="w-10 h-10 text-black"></i>
            </div>
            <h3 class="font-black text-3xl uppercase mb-4 text-black">Â¡Recibido!</h3>
            <p id="popup-message" class="font-mono text-sm mb-6 text-black">Tu solicitud ha sido creada en nuestro sistema.</p>
            <button onclick="closePopup()" class="w-full bg-black text-white font-bold py-3 uppercase border-2 border-black hover:bg-cd-magenta hover:border-cd-magenta transition-colors shadow-[4px_4px_0_black] min-h-[48px]">
                Entendido
            </button>
        </div>
    </div>

    <script>
        // Custom Cursor
        const cursorDot = document.getElementById('cursor-dot');
        const cursorOutline = document.getElementById('cursor-outline');
        let mouseX = 0, mouseY = 0;
        let outlineX = 0, outlineY = 0;

        window.addEventListener('mousemove', (e) => {
            mouseX = e.clientX;
            mouseY = e.clientY;
            cursorDot.style.transform = `translate(${mouseX}px, ${mouseY}px)`;
        });

        function animateCursor() {
            outlineX += (mouseX - outlineX) * 0.15;
            outlineY += (mouseY - outlineY) * 0.15;
            cursorOutline.style.transform = `translate(${outlineX}px, ${outlineY}px)`;
            requestAnimationFrame(animateCursor);
        }
        animateCursor();

        // Load Header
        // Header and Footer handled by layout-loader.js

        // Initialize Lucide Icons
        lucide.createIcons();

        // --- FORM LOGIC ---
        
        // Popup Logic
        window.closePopup = function() {
            document.getElementById('success-popup').classList.add('hidden');
        }

        window.showSuccessPopup = function(contactMethod) {
            const popup = document.getElementById('success-popup');
            const messageEl = document.getElementById('popup-message');
            
            if (contactMethod === 'email') {
                messageEl.textContent = "Solicitud creada correctamente. Te hemos enviado un correo de confirmaciÃ³n.";
            } else {
                messageEl.textContent = "Solicitud creada correctamente. Te contactaremos vÃ­a WhatsApp.";
            }
            
            popup.classList.remove('hidden');
        }

        // Toggle Contact Method
        // (Removed as we now show both fields permanently)

        // Form Submission Logic
        document.addEventListener('DOMContentLoaded', () => {
            const serviceForm = document.getElementById('serviceRequestForm');
            const N8N_WEBHOOK_URL = 'https://n8n.cambiodigital.cloud/webhook/c1692d85-8ad6-4977-b484-541c16463d0a'; 

            if(serviceForm) {
                serviceForm.addEventListener('submit', async (e) => {
                    e.preventDefault();
                    const submitBtn = document.getElementById('btn-submit-task');
                    const originalBtnText = submitBtn.innerHTML;
                    
                    const fileInput = document.getElementById('req-file');
                    const file = fileInput.files[0];

                    if (file && file.size > 50 * 1024 * 1024) {
                        alert('El archivo es demasiado grande. El lÃ­mite es 50MB.');
                        return;
                    }
                    
                    submitBtn.innerHTML = 'Enviando... <i data-lucide="loader" class="animate-spin"></i>';
                    submitBtn.disabled = true;
                    lucide.createIcons();

                    // Get values
                    const requester = document.getElementById('req-name').value;
                    const email = document.getElementById('req-email').value;
                    const countryCode = document.getElementById('req-country-code').value;
                    const phoneNumber = document.getElementById('req-phone').value;
                    const fullPhone = `${countryCode} ${phoneNumber}`;
                    
                    const title = document.getElementById('req-title').value;
                    const description = document.getElementById('req-desc').value;
                    const dueDate = document.getElementById('req-date').value;

                    const formData = new FormData();
                    formData.append('formType', 'service-initial'); // Tagged as initial
                    formData.append('taskName', title);
                    formData.append('requester', requester);
                    
                    // We use Email as primary contact for the system
                    formData.append('contactMethod', 'email');
                    formData.append('contactValue', email);
                    
                    formData.append('dueDate', new Date(dueDate).getTime());
                    
                    // Rich description with all details
                    formData.append('taskDescription', `
**SOLICITUD INICIAL DE SERVICIO**
--------------------------------
**Solicitante:** ${requester}
**Email (Google):** ${email}
**TelÃ©fono:** ${fullPhone}
**Fecha Inicio:** ${dueDate}

**DETALLES DEL REQUERIMIENTO:**
${description}
                    `);
                    
                    if (file) formData.append('file', file);

                    try {
                        const response = await fetch(N8N_WEBHOOK_URL, { method: 'POST', body: formData });
                        if (response.ok) {
                            serviceForm.reset();
                            showSuccessPopup('email');
                        } else throw new Error('Error en el servidor');
                    } catch (error) {
                        console.error(error);
                        alert("Error al conectar. Por favor intenta de nuevo.");
                    } finally {
                        submitBtn.innerHTML = originalBtnText;
                        submitBtn.disabled = false;
                        lucide.createIcons();
                    }
                });
            }
        });
    </script>

    <!-- Banner de Cookies y Popup NavideÃ±o DESHABILITADOS TEMPORALMENTE -->
    <script src="/assets/js/layout-loader.js"></script>
</body>
</html>
